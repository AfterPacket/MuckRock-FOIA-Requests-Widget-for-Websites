<div id="muckrock-widget">
  <script>
const username = 'TheJ'; // Replace with the username of the user whose FOIA requests you want to display
const corsProxyUrl = 'https://api.codetabs.com/v1/proxy/?quest=';
const apiUrl = `https://www.muckrock.com/api_v1/foia/?user=${username}&title=&status=&embargo=unknown&jurisdiction=&agency=&projects=&tags=&has_datetime_submitted=unknown&has_datetime_done=unknown&ordering=-datetime_submitted`;
fetch(corsProxyUrl + apiUrl)
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    const requests = data.results;
    const requestList = document.querySelector('#request-list');
    requests.forEach(request => {
      const listItem = document.createElement('li');
      const link = document.createElement('a');
      link.textContent =request.title;
   if (request.absolute_url) {
        link.href = request.absolute_url;
      } 
    listItem.appendChild(link);
      requestList.appendChild(listItem);
    
    });
  })
  .catch(error => console.error('Error fetching data:', error));

  </script>
  
    <h2>Recent FOIA Requests for TheJ </h2>
  <ul id="request-list"></ul>
</div>

</div>
          
